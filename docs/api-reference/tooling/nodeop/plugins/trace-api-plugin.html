<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-api-reference/tooling/nodeop/plugins/trace-api-plugin" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">trace-api-plugin | Wire Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wire.foundation/favicon.ico"><meta data-rh="true" name="twitter:image" content="https://wire.foundation/favicon.ico"><meta data-rh="true" property="og:url" content="https://docs.wire.network/docs/api-reference/tooling/nodeop/plugins/trace-api-plugin"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="trace-api-plugin | Wire Docs"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="https://wire.foundation/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.wire.network/docs/api-reference/tooling/nodeop/plugins/trace-api-plugin"><link data-rh="true" rel="alternate" href="https://docs.wire.network/docs/api-reference/tooling/nodeop/plugins/trace-api-plugin" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.wire.network/docs/api-reference/tooling/nodeop/plugins/trace-api-plugin" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://17BRJEIISS-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Wire Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.ebf7d346.css">
<script src="/assets/js/runtime~main.676d71a1.js" defer="defer"></script>
<script src="/assets/js/main.c749389c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://wire.foundation/favicon.ico" alt="Wire Network" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://wire.foundation/favicon.ico" alt="Wire Network" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Wire Docs</b></a><a class="navbar__item navbar__link" href="/docs/category/wire-basics">Developers Portal</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/api-reference/quick-reference">API Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Wire-Network/wire-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/api-reference/quick-reference">Quick Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/api-reference/tooling">Tooling</a><button aria-label="Collapse sidebar category &#x27;Tooling&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/api-reference/tooling/clio">clio</a><button aria-label="Expand sidebar category &#x27;clio&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/api-reference/tooling/kiod">kiod</a><button aria-label="Expand sidebar category &#x27;kiod&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/api-reference/tooling/nodeop">nodeop</a><button aria-label="Collapse sidebar category &#x27;nodeop&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/nodeop-apis">Nodeop RPC APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/nodeop-cli">Nodeop Configuration Document</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/api-reference/tooling/nodeop/concepts">Concepts</a><button aria-label="Expand sidebar category &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/blockvault-client-plugin">Plugins</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/blockvault-client-plugin">blockvault-client-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/chain-api-plugin">chain-api-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/chain-plugin">chain-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/db-size-api-plugin">db-size-api-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/history-api-plugin">history-api-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/history-plugin">history-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/http-client-plugin">http-client-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/http-plugin">http-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/login-plugin">login-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/net-api-plugin">net-api-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/net-plugin">net-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/producer-api-plugin">producer-api-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/producer-plugin">producer-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/resource-monitor-plugin">resource-monitor-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/state-history-plugin">state-history-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/trace-api-plugin">trace-api-plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/plugins/txn-test-gen-plugin">txn-test-gen-plugin</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/api-reference/tooling/nodeop/logging">Logging</a><button aria-label="Expand sidebar category &#x27;Logging&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/replays">Nodeop Replays</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/api-reference/tooling/nodeop/how-to/how-to-configure-state-storage">How-To</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/tooling/nodeop/troubleshooting">Nodeop Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/api-reference/tooling/cdt">Wire CDT</a><button aria-label="Expand sidebar category &#x27;Wire CDT&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/api-reference/system-contracts">System Contracts</a><button aria-label="Expand sidebar category &#x27;System Contracts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/api-reference/tooling/utilities">Utilities</a><button aria-label="Expand sidebar category &#x27;Utilities&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/api-reference/tooling"><span itemprop="name">Tooling</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/api-reference/tooling/nodeop"><span itemprop="name">nodeop</span></a><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Plugins</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">trace-api-plugin</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>trace-api-plugin</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>The <code>trace_api_plugin</code> provides a consumer-focused long-term API for retrieving retired actions and related metadata from a specified block. The plugin stores serialized block trace data to the filesystem for later retrieval via HTTP RPC requests. For detailed information about the definition of this application programming interface see the <a href="/assets/files/TraceApi-5e0d6ac86ad7429853621b4f8daa8476.yaml" target="_blank">Trace API reference</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="purpose">Purpose<a href="#purpose" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h2>
<p>While integrating applications such as block explorers and exchanges with an Wire blockchain, the user might require a complete transcript of actions processed by the blockchain, including those spawned from the execution of smart contracts and scheduled transactions. The <code>trace_api_plugin</code> serves this need. The purpose of the plugin is to provide:</p>
<ul>
<li>A transcript of retired actions and related metadata</li>
<li>A consumer-focused long-term API to retrieve blocks</li>
<li>Maintainable resource commitments at the Wire nodes</li>
</ul>
<p>Therefore, one crucial goal of the <code>trace_api_plugin</code> is to improve the maintenance of node resources (file system, disk space, memory used, etc.). This goal is different from the existing <code>history_plugin</code> which provides far more configurable filtering and querying capabilities, or the existing <code>state_history_plugin</code> which provides a binary streaming interface to access structural chain data, action data, as well as state deltas.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h2>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># config.ini</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">plugin = sysio::trace_api_plugin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[options]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># command-line</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">nodeop</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--plugin</span><span class="token plain"> sysio::trace_api_plugin </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-options">Configuration Options<a href="#configuration-options" class="hash-link" aria-label="Direct link to Configuration Options" title="Direct link to Configuration Options">​</a></h2>
<p>These can be specified from both the <code>nodeop</code> command-line or the <code>config.ini</code> file:</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Config Options for sysio::trace_api_plugin:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --trace-dir arg (=&quot;traces&quot;)           the location of the trace directory </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        (absolute path or relative to </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        application data dir)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --trace-slice-stride arg (=10000)     the number of blocks each &quot;slice&quot; of </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        trace data will contain on the </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        filesystem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --trace-minimum-irreversible-history-blocks arg (=-1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        Number of blocks to ensure are kept </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        past LIB for retrieval before &quot;slice&quot; </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        files can be automatically removed.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        A value of -1 indicates that automatic </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        removal of &quot;slice&quot; files will be turned</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        off.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --trace-minimum-uncompressed-irreversible-history-blocks arg (=-1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        Number of blocks to ensure are </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        uncompressed past LIB. Compressed </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        &quot;slice&quot; files are still accessible but </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        may carry a performance loss on </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        retrieval</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        A value of -1 indicates that automatic </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        compression of &quot;slice&quot; files will be </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        turned off.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --trace-rpc-abi arg                   ABIs used when decoding trace RPC </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        responses.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        There must be at least one ABI </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        specified OR the flag trace-no-abis </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        must be used.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        ABIs are specified as &quot;Key=Value&quot; pairs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        in the form &lt;account-name&gt;=&lt;abi-def&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        Where &lt;abi-def&gt; can be:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                           an absolute path to a file </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        containing a valid JSON-encoded ABI</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                           a relative path from `data-dir` to a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        file containing a valid JSON-encoded </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        ABI</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --trace-no-abis                       Use to indicate that the RPC responses </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        will not use ABIs.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        Failure to specify this option when </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        there are no trace-rpc-abi </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        configuations will result in an Error.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        This option is mutually exclusive with </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                        trace-rpc-api</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dependencies">Dependencies<a href="#dependencies" class="hash-link" aria-label="Direct link to Dependencies" title="Direct link to Dependencies">​</a></h2>
<ul>
<li><a href="/docs/api-reference/tooling/nodeop/plugins/chain-plugin"><code>chain_plugin</code></a></li>
<li><a href="/docs/api-reference/tooling/nodeop/plugins/http-plugin"><code>http_plugin</code></a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="load-dependency-examples">Load Dependency Examples<a href="#load-dependency-examples" class="hash-link" aria-label="Direct link to Load Dependency Examples" title="Direct link to Load Dependency Examples">​</a></h3>
<p>The following plugins are loaded with default settings if not specified on the command line or <code>config.ini</code>:</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># config.ini</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">plugin = sysio::chain_plugin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[options]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">plugin = sysio::http_plugin </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[options]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># command-line</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">nodeop</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--plugin</span><span class="token plain"> sysio::chain_plugin </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--plugin</span><span class="token plain"> sysio::http_plugin </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-example">Configuration Example<a href="#configuration-example" class="hash-link" aria-label="Direct link to Configuration Example" title="Direct link to Configuration Example">​</a></h2>
<p>Here is a <code>nodeop</code> configuration example for the <code>trace_api_plugin</code> when tracing some system contracts:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">nodeop</span><span class="token plain"> --data-dir data_dir --config-dir config_dir --trace-dir traces_dir</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--plugin</span><span class="token plain"> sysio::trace_api_plugin </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--trace-rpc-abi</span><span class="token operator">=</span><span class="token plain">sysio</span><span class="token operator">=</span><span class="token plain">abis/sysio.abi </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--trace-rpc-abi</span><span class="token operator">=</span><span class="token plain">sysio.token</span><span class="token operator">=</span><span class="token plain">abis/sysio.token.abi </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--trace-rpc-abi</span><span class="token operator">=</span><span class="token plain">sysio.msig</span><span class="token operator">=</span><span class="token plain">abis/sysio.msig.abi </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--trace-rpc-abi</span><span class="token operator">=</span><span class="token plain">sysio.wrap</span><span class="token operator">=</span><span class="token plain">abis/sysio.wrap.abi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="definitions">Definitions<a href="#definitions" class="hash-link" aria-label="Direct link to Definitions" title="Direct link to Definitions">​</a></h2>
<p>This section provides an overview of <em>slices</em>, the <em>trace log</em> contents, and the <em>clog format</em>. Mastery of these concepts is beneficial for an effective use of the <code>trace_api_plugin</code> options.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="slices">Slices<a href="#slices" class="hash-link" aria-label="Direct link to Slices" title="Direct link to Slices">​</a></h3>
<p>In the context of the <code>trace_api_plugin</code>, a <em>slice</em> is defined as a collection of all relevant trace data between a given starting block height (inclusive) and a given ending block height (exclusive). For instance, a slice from 0 to 10,000 is a collection of all blocks with block numbers greater than or equal to 0 and less than 10,000. The trace directory contains a collection of slices. Each slice consists of a <em>trace data</em> log file and a <em>trace index</em> metadata log file:</p>
<ul>
<li><code>trace_&lt;S&gt;-&lt;E&gt;.log</code></li>
<li><code>trace_index_&lt;S&gt;-&lt;E&gt;.log</code></li>
</ul>
<p>where <code>&lt;S&gt;</code> and <code>&lt;E&gt;</code> are the starting and ending block numbers for the slice padded with leading 0&#x27;s to a stride. For instance if the start block is 5, the last is 15, and the stride is 10, then the resulting <code>&lt;S&gt;</code> is <code>0000000005</code> and <code>&lt;E&gt;</code> is <code>0000000015</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="trace_s-elog">trace_&lt;S&gt;-&lt;E&gt;.log<a href="#trace_s-elog" class="hash-link" aria-label="Direct link to trace_&lt;S&gt;-&lt;E&gt;.log" title="Direct link to trace_&lt;S&gt;-&lt;E&gt;.log">​</a></h4>
<p>The trace data log is an append only log that stores the actual binary serialized block data. The contents include the transaction and action trace data needed to service the RPC requests augmented by the per-action ABIs. Two block types are supported:</p>
<ul>
<li><code>block_trace_v0</code></li>
<li><code>block_trace_v1</code></li>
</ul>
<p>The data log begins with a basic header that includes versioning information about the data stored in the log. <code>block_trace_v0</code> includes the block ID, block number, previous block ID, the production timestamp, the producer that signed the block, and the actual trace data. <code>block_trace_v1</code> adds both merkle root hashes for the list of transactions and the list of actions included in the block as well as the production schedule count since genesis.</p>
<p>The log may include blocks that have been forked out of the blockchain as part of the normal operations of the chain. The next entry in the file will always have a block number one higher than the previous one or the same number or less because of forking.  Every trace entry will have a corresponding entry in the corresponding slice file for trace indexes. Note that forked blocks can be avoided by running nodeop in <code>read-mode=irreversible</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="trace_index_s-elog">trace_index_&lt;S&gt;-&lt;E&gt;.log<a href="#trace_index_s-elog" class="hash-link" aria-label="Direct link to trace_index_&lt;S&gt;-&lt;E&gt;.log" title="Direct link to trace_index_&lt;S&gt;-&lt;E&gt;.log">​</a></h4>
<p>The trace index log or metadata log is an append only log that stores a sequence of binary-serialized types. Currently two types are supported:</p>
<ul>
<li><code>block_entry_v0</code></li>
<li><code>lib_entry_v0</code></li>
</ul>
<p>The index log begins with a basic header that includes versioning information about the data stored in the log. <code>block_entry_v0</code> includes the block ID and block number with an offset to the location of that block within the data log. This entry is used to locate the offsets of both <code>block_trace_v0</code> and <code>block_trace_v1</code> blocks. <code>lib_entry_v0</code> includes an entry for the latest known LIB. The reader module uses the LIB information for reporting to users an irreversible status.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="clog-format">clog format<a href="#clog-format" class="hash-link" aria-label="Direct link to clog format" title="Direct link to clog format">​</a></h3>
<p>Compressed trace log files have the <code>.clog</code> file extension (see <a href="#compression-of-log-files">Compression of log files</a> below). The clog is a generic compressed file with an index of seek-able decompression points appended at the end. The clog format layout looks as follows:</p>
<p><img decoding="async" loading="lazy" alt="clog-format" src="/assets/images/clog-format-fd9184d01472d7b3679c612c2ad98ed1.png" width="678" height="282" class="img_ev3q"></p>
<p>The data is compressed into raw zlib form with full-flush <em>seek points</em> placed at regular intervals. A decompressor can start from any of these <em>seek points</em> without reading previous data and it can also traverse a seek point without issue if it appears within the data.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Size reduction of trace logs</div><div class="admonitionContent_BuS1"><p>| Data compression can reduce the space growth of trace logs twentyfold! For instance, with 512 seek points and using the test dataset on the EOS public network, data compression reduces the growth of the trace directory from ~50 GiB/day to ~2.5 GiB/day for full data. Due to the high redundancy of the trace log contents, the compression is still comparable to <code>gzip -9</code>. The decompressed data is also made immediately available via the <a href="/docs/api-reference/trace-api">Trace RPC API</a> without any service degradation.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="role-of-seek-points">Role of seek points<a href="#role-of-seek-points" class="hash-link" aria-label="Direct link to Role of seek points" title="Direct link to Role of seek points">​</a></h4>
<p>As the file is being compressed, the seek point index records the original uncompressed offset with the new compressed offset creating a mapping so that the original index values (uncompressed offsets) can be mapped to the nearest seek point before the uncompressed offset. This dramatically reduces the seek time to parts of the uncompressed file that appear later in the stream.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-maintenance">Automatic Maintenance<a href="#automatic-maintenance" class="hash-link" aria-label="Direct link to Automatic Maintenance" title="Direct link to Automatic Maintenance">​</a></h2>
<p>One of the main design goals of the <code>trace_api_plugin</code> is to minimize the manual housekeeping and maintenance of filesystem resources. To that end, the plugin facilitates the automatic removal of trace log files and the automatic reduction of their disk footprint through data compression.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removal-of-log-files">Removal of log files<a href="#removal-of-log-files" class="hash-link" aria-label="Direct link to Removal of log files" title="Direct link to Removal of log files">​</a></h3>
<p>To allow the removal of previous trace log files created by the <code>trace_api_plugin</code>, you can use the following option:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --trace-minimum-irreversible-history-blocks N </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">=</span><span class="token plain">-1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the argument <code>N</code> is 0 or greater, the plugin will only keep <code>N</code> blocks on disk before the current LIB block. Any trace log file with block numbers lesser than then previous <code>N</code> blocks will be scheduled for automatic removal.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compression-of-log-files">Compression of log files<a href="#compression-of-log-files" class="hash-link" aria-label="Direct link to Compression of log files" title="Direct link to Compression of log files">​</a></h3>
<p>The <code>trace_api_plugin</code> also supports an option to optimize disk space by applying data compression on the trace log files:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --trace-minimum-uncompressed-irreversible-history-blocks N </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">=</span><span class="token plain">-1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the argument <code>N</code> is 0 or greater, the plugin automatically sets a background thread to compress the irreversible sections of the trace log files. The previous N irreversible blocks past the current LIB block are left uncompressed.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Trace API utility</div><div class="admonitionContent_BuS1"><p>| The trace log files can also be compressed manually with the <a href="/docs/api-reference/tooling/utilities/trace-api-util">trace_api_util</a> utility.</p></div></div>
<p>If resource usage cannot be effectively managed via the <code>trace-minimum-irreversible-history-blocks</code> and <code>trace-minimum-uncompressed-irreversible-history-blocks</code> options, then there might be a need for periodic manual maintenance. In that case, the user may opt to manage resources through an external system or recurrent process.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="manual-maintenance">Manual Maintenance<a href="#manual-maintenance" class="hash-link" aria-label="Direct link to Manual Maintenance" title="Direct link to Manual Maintenance">​</a></h2>
<p>The <code>trace-dir</code> option defines the directory on the filesystem where the trace log files are stored by the <code>trace_api_plugin</code>. These files are stable once the LIB block has progressed past a given slice and then can be deleted at any time to reclaim filesystem space. The deployed system contract will tolerate any out-of-process management system that removes some or all of these files in this directory regardless of what data they represent, or whether there is a running <code>nodeop</code> instance accessing them or not.  Data which would nominally be available, but is no longer so due to manual maintenance, will result in a HTTP 404 response from the appropriate API endpoint(s).</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>For node operators</div><div class="admonitionContent_BuS1"><p>| Node operators can take full control over the lifetime of the historical data available in their nodes via the <code>trace-api-plugin</code> and the <code>trace-minimum-irreversible-history-blocks</code> and <code>trace-minimum-uncompressed-irreversible-history-blocks</code> options in conjunction with any external filesystem resource manager.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Wire-Network/wire-docs/docs/api-reference/tooling/nodeop/plugins/trace-api-plugin.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/api-reference/tooling/nodeop/plugins/state-history-plugin"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">state-history-plugin</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/api-reference/tooling/nodeop/plugins/txn-test-gen-plugin"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">txn-test-gen-plugin</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#purpose" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#configuration-options" class="table-of-contents__link toc-highlight">Configuration Options</a></li><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a><ul><li><a href="#load-dependency-examples" class="table-of-contents__link toc-highlight">Load Dependency Examples</a></li></ul></li><li><a href="#configuration-example" class="table-of-contents__link toc-highlight">Configuration Example</a></li><li><a href="#definitions" class="table-of-contents__link toc-highlight">Definitions</a><ul><li><a href="#slices" class="table-of-contents__link toc-highlight">Slices</a></li><li><a href="#clog-format" class="table-of-contents__link toc-highlight">clog format</a></li></ul></li><li><a href="#automatic-maintenance" class="table-of-contents__link toc-highlight">Automatic Maintenance</a><ul><li><a href="#removal-of-log-files" class="table-of-contents__link toc-highlight">Removal of log files</a></li><li><a href="#compression-of-log-files" class="table-of-contents__link toc-highlight">Compression of log files</a></li></ul></li><li><a href="#manual-maintenance" class="table-of-contents__link toc-highlight">Manual Maintenance</a></li></ul></div></div></div></div></main></div></div></div><div style="display:flex;justify-content:center;align-items:center;color:white;background-color:#303846;padding-top:30px"><p>We welcome the community’s suggestions to help improve our documentation. Feel free to email your input to us at <strong style="cursor:pointer;text-decoration:underline">docs@wire.network</strong>.</p></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Wire-Network" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/wire-network-blockchain/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/wire_blockchain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/AbGDQv9qVZ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@wirenetwork1515" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="https://wire.foundation/favicon.ico" alt="Wire Network Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="80" height="51"><img src="https://wire.foundation/favicon.ico" alt="Wire Network Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="80" height="51"></div><div class="footer__copyright">Copyright © 2024 Wire Network</div></div></div></footer></div>
</body>
</html>