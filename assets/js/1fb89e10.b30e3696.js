"use strict";(self.webpackChunkwire_docs=self.webpackChunkwire_docs||[]).push([[381],{23890:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var n=t(74848),r=t(28453);const i={},a="sysio.msig examples",o={id:"api-reference/system-contracts/how-to-guides/how-to-sign-a-multisig-transaction-with-sysio.msig",title:"sysio.msig examples",description:"Multisig proposal",source:"@site/docs/api-reference/system-contracts/how-to-guides/how-to-sign-a-multisig-transaction-with-sysio.msig.md",sourceDirName:"api-reference/system-contracts/how-to-guides",slug:"/api-reference/system-contracts/how-to-guides/how-to-sign-a-multisig-transaction-with-sysio.msig",permalink:"/wire-docs/docs/api-reference/system-contracts/how-to-guides/how-to-sign-a-multisig-transaction-with-sysio.msig",draft:!1,unlisted:!1,editUrl:"https://github.com/Wire-Network/wire-docs/docs/api-reference/system-contracts/how-to-guides/how-to-sign-a-multisig-transaction-with-sysio.msig.md",tags:[],version:"current",frontMatter:{},sidebar:"apiReferenceSidebar",previous:{title:"How to create, issue and transfer a token",permalink:"/wire-docs/docs/api-reference/system-contracts/how-to-guides/how-to-create-issue-and-transfer-a-token"},next:{title:"Utilities",permalink:"/wire-docs/docs/api-reference/tooling/utilities/"}},c={},l=[{value:"Multisig proposal",id:"multisig-proposal",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Steps",id:"steps",level:3},{value:"Step 1 - <code>tester</code> account creates a proposal",id:"step-1---tester-account-creates-a-proposal",level:4},{value:"Step 2 - <code>treasury</code> reviews the proposal",id:"step-2---treasury-reviews-the-proposal",level:4},{value:"Step 3 - <code>treasury</code> approves the proposal",id:"step-3---treasury-approves-the-proposal",level:4},{value:"Step 4 -  <code>tester</code>  initiates execution",id:"step-4----tester--initiates-execution",level:4},{value:"Transferring a token",id:"transferring-a-token",level:2},{value:"Prerequisites",id:"prerequisites-1",level:3},{value:"Steps",id:"steps-1",level:3},{value:"<code>tester</code> creates a proposal",id:"tester-creates-a-proposal",level:4},{value:"Another user reviews the transaction",id:"another-user-reviews-the-transaction",level:4},{value:"And then approves it",id:"and-then-approves-it",level:4},{value:"First user check account balance before executing the proposed transaction",id:"first-user-check-account-balance-before-executing-the-proposed-transaction",level:4},{value:"First user initiates execution of proposed transaction",id:"first-user-initiates-execution-of-proposed-transaction",level:4},{value:"First user can check account balance, it should be increased by 1.0000 SYS",id:"first-user-can-check-account-balance-it-should-be-increased-by-10000-sys",level:4}];function d(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsxs)(s.h1,{id:"sysiomsig-examples",children:[(0,n.jsx)(s.code,{children:"sysio.msig"})," examples"]})}),"\n",(0,n.jsx)(s.h2,{id:"multisig-proposal",children:"Multisig proposal"}),"\n",(0,n.jsx)(s.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"sysio.token"})," contract deployed to ",(0,n.jsx)(s.code,{children:"sysio.token"})," account, and ",(0,n.jsx)(s.code,{children:"sysio.msig"})," contract deployed to the privileged ",(0,n.jsx)(s.code,{children:"sysio.msig"})," account."]}),"\n",(0,n.jsxs)(s.li,{children:["account ",(0,n.jsx)(s.code,{children:"treasury"}),"(the issuer in our case) and ",(0,n.jsx)(s.code,{children:"tester"})," accounts created."]}),"\n",(0,n.jsxs)(s.li,{children:["keys to ",(0,n.jsx)(s.code,{children:"treasury"})," and ",(0,n.jsx)(s.code,{children:"tester"})," accounts have been imported into local wallet and the wallet is unlocked."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"steps",children:"Steps"}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h4,{id:"step-1---tester-account-creates-a-proposal",children:["Step 1 - ",(0,n.jsx)(s.code,{children:"tester"})," account creates a proposal"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'clio multisig propose test \'[{"actor": "treasury", "permission": "active"}]\' \'[{"actor": "treasury", "permission": "active"}]\' sysio.token issue \'{"to": "tester", "quantity": "1000.0000 SYS", "memo": ""}\' -p tester\n'})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Explantion:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"tester"})," creates a multisig proposal named ",(0,n.jsx)(s.em,{children:"test"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["The proposal requests ",(0,n.jsx)(s.code,{children:"treasury"}),"s approval."]}),"\n",(0,n.jsxs)(s.li,{children:["The proposed transaction is to issue 1,000.0000 SYS to ",(0,n.jsx)(s.code,{children:"tester"})," from the ",(0,n.jsx)(s.code,{children:"sysio.token"})," contract."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Expected output:"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'executed transaction: e26f3a3a7cba524a7b15a0b6c77c7daa73d3ba9bf84e83f9c2cdf27fcb183d61  336 bytes  107520 cycles\n#    sysio.msig <= sysio.msig::propose          {"proposer":"tester","proposal_name":"test","requested":[{"actor":"treasury","permission":"active"}]...\n'})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h4,{id:"step-2---treasury-reviews-the-proposal",children:["Step 2 - ",(0,n.jsx)(s.code,{children:"treasury"})," reviews the proposal"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'clio multisig review tester test\n\nOuput: \n{\n  "proposal_name": "test",\n  "requested_approvals": [{\n      "actor": "treasury",\n      "permission": "active"\n    }\n  ],\n  "provided_approvals": [],\n  "packed_transaction": "00aee75a0000000000000000000000000100a6823403ea30550000000000a5317601000000fe6a6cd4cd00000000a8ed323219000000005c95b1ca809698000000000004454f530000000000",\n  "transaction": {\n    "expiration": "2018-05-01T00:00:00",\n    "region": 0,\n    "ref_block_num": 0,\n    "ref_block_prefix": 0,\n    "max_net_usage_words": 0,\n    "max_kcpu_usage": 0,\n    "delay_sec": 0,\n    "context_free_actions": [],\n    "actions": [{\n        "account": "sysio.token",\n        "name": "issue",\n        "authorization": [{\n            "actor": "treasury",\n            "permission": "active"\n          }\n        ],\n        "data": {\n          "to": "tester",\n          "quantity": "1000.0000 SYS",\n          "memo": ""\n        },\n        "hex_data": "000000005c95b1ca809698000000000004454f530000000000"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h4,{id:"step-3---treasury-approves-the-proposal",children:["Step 3 - ",(0,n.jsx)(s.code,{children:"treasury"})," approves the proposal"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'clio multisig approve tester test \'{"actor": "treasury", "permission": "active"}\' -p treasury\n'})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Expected output"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'executed transaction: 475970a4b0016368d0503d1ce01577376f91f5a5ba63dd4353683bd95101b88d  256 bytes  108544 cycles\n#    sysio.msig <= sysio.msig::approve          {"proposer":"tester","proposal_name":"test","level":{"actor":"treasury","permission":"active"}}\n'})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h4,{id:"step-4----tester--initiates-execution",children:["Step 4 -  ",(0,n.jsx)(s.code,{children:"tester"}),"  initiates execution"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'$ clio multisig exec tester test -p tester\n\nexecuted transaction: 64e5eaceb77362694055f572ae35876111e87b637a55250de315b1b55e56d6c2  248 bytes  109568 cycles\n#    sysio.msig <= sysio.msig::exec             {"proposer":"tester","proposal_name":"test","executer":"tester"}\n'})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"transferring-a-token",children:"Transferring a token"}),"\n",(0,n.jsx)(s.h3,{id:"prerequisites-1",children:"Prerequisites"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"sysio.token"})," contract deployed to ",(0,n.jsx)(s.code,{children:"sysio.token"})," account, and ",(0,n.jsx)(s.code,{children:"sysio.msig"})," contract deployed to the privileged ",(0,n.jsx)(s.code,{children:"sysio.msig"})," account."]}),"\n",(0,n.jsxs)(s.li,{children:["account ",(0,n.jsx)(s.code,{children:"treasury"}),"(the issuer in our case) and ",(0,n.jsx)(s.code,{children:"tester"})," accounts created. ",(0,n.jsx)(s.code,{children:"treasury"})," has at least 1.1000 SYS token balance"]}),"\n",(0,n.jsxs)(s.li,{children:["keys to ",(0,n.jsx)(s.code,{children:"treasury"})," and ",(0,n.jsx)(s.code,{children:"tester"})," accounts have been imported into local wallet and the wallet is unlocked."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"steps-1",children:"Steps"}),"\n",(0,n.jsxs)(s.h4,{id:"tester-creates-a-proposal",children:[(0,n.jsx)(s.code,{children:"tester"})," creates a proposal"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'clio multisig propose test \'[{"actor": "treasury", "permission": "active"}]\' \'[{"actor": "treasury", "permission": "active"}]\' sysio.token transfer \'{"from": "treasury", "to": "tester", "quantity": "1.0000 SYS", "memo": ""}\' -p tester\n'})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Expected output"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'executed transaction: e26f3a3a7cba524a7b15a0b6c77c7daa73d3ba9bf84e83f9c2cdf27fcb183d61  336 bytes  107520 cycles\n#    sysio.msig <= sysio.msig::propose          {"proposer":"tester","proposal_name":"test","requested":[{"actor":"treasury","permission":"active"}]...\n'})}),"\n",(0,n.jsx)(s.h4,{id:"another-user-reviews-the-transaction",children:"Another user reviews the transaction"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'$ clio multisig review tester test\n{\n  "proposal_name": "test",\n  "requested_approvals": [{\n      "actor": "treasury",\n      "permission": "active"\n    }\n  ],\n  "provided_approvals": [],\n  "packed_transaction": "00aee75a0000000000000000000000000100a6823403ea30550000000000a5317601000000fe6a6cd4cd00000000a8ed323219000000005c95b1ca809698000000000004454f530000000000",\n  "transaction": {\n    "expiration": "2018-05-01T00:00:00",\n    "region": 0,\n    "ref_block_num": 0,\n    "ref_block_prefix": 0,\n    "max_net_usage_words": 0,\n    "max_kcpu_usage": 0,\n    "delay_sec": 0,\n    "context_free_actions": [],\n    "actions": [{\n        "account": "sysio.token",\n        "name": "transfer",\n        "authorization": [{\n            "actor": "treasury",\n            "permission": "active"\n          }\n        ],\n        "data": {\n          "from": "treasury",\n          "to": "tester",\n          "quantity": "1.0000 SYS",\n          "memo": ""\n        },\n        "hex_data": "000000005c95b1ca809698000000000004454f530000000000"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,n.jsx)(s.h4,{id:"and-then-approves-it",children:"And then approves it"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'$ clio multisig approve tester test \'{"actor": "treasury", "permission": "active"}\' -p treasury\n\nexecuted transaction: 475970a4b0016368d0503d1ce01577376f91f5a5ba63dd4353683bd95101b88d  256 bytes  108544 cycles\n#    sysio.msig <= sysio.msig::approve          {"proposer":"tester","proposal_name":"test","level":{"actor":"treasury","permission":"active"}}\n'})}),"\n",(0,n.jsx)(s.h4,{id:"first-user-check-account-balance-before-executing-the-proposed-transaction",children:"First user check account balance before executing the proposed transaction"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"$ clio get account tester\n...\nSYS balances: \n     liquid:            1.0487 SYS\n     staked:            2.0000 SYS\n     unstaking:         0.0000 SYS\n     total:             4.0487 SYS\n"})}),"\n",(0,n.jsx)(s.h4,{id:"first-user-initiates-execution-of-proposed-transaction",children:"First user initiates execution of proposed transaction"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:'$ clio multisig exec tester test -p tester\n\nexecuted transaction: 64e5eaceb77362694055f572ae35876111e87b637a55250de315b1b55e56d6c2  248 bytes  109568 cycles\n#    sysio.msig <= sysio.msig::exec             {"proposer":"tester","proposal_name":"test","executer":"tester"}\n'})}),"\n",(0,n.jsx)(s.h4,{id:"first-user-can-check-account-balance-it-should-be-increased-by-10000-sys",children:"First user can check account balance, it should be increased by 1.0000 SYS"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"$ clio get account tester\n...\nSYS balances: \n     liquid:            2.0487 SYS\n     staked:            2.0000 SYS\n     unstaking:         0.0000 SYS\n     total:             4.0487 SYS\n"})})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>o});var n=t(96540);const r={},i=n.createContext(r);function a(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);