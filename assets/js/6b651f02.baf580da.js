"use strict";(self.webpackChunkwire_docs=self.webpackChunkwire_docs||[]).push([[9591],{75379:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>n,default:()=>a,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var i=o(74848),s=o(28453);const r={title:"sysio-blocklog",link_text:"sysio-blocklog"},n=void 0,l={id:"api-reference/tooling/utilities/sysio-blocklog",title:"sysio-blocklog",description:"sysio-blocklog is a command-line interface (CLI) utility that allows node operators to perform low-level tasks on the block logs created by a nodeop instance. sysio-blocklog can perform one of the following operations:",source:"@site/docs/api-reference/tooling/utilities/sysio-blocklog.md",sourceDirName:"api-reference/tooling/utilities",slug:"/api-reference/tooling/utilities/sysio-blocklog",permalink:"/docs/api-reference/tooling/utilities/sysio-blocklog",draft:!1,unlisted:!1,editUrl:"https://github.com/Wire-Network/wire-docs/docs/api-reference/tooling/utilities/sysio-blocklog.md",tags:[],version:"current",frontMatter:{title:"sysio-blocklog",link_text:"sysio-blocklog"},sidebar:"apiReferenceSidebar",previous:{title:"Utilities",permalink:"/docs/api-reference/tooling/utilities/"},next:{title:"trace_api_util",permalink:"/docs/api-reference/tooling/utilities/trace-api-util"}},c={},d=[{value:"Options",id:"options",level:2},{value:"Notes",id:"notes",level:2}];function h(e){const t={code:"code",h2:"h2",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"sysio-blocklog"})," is a command-line interface (CLI) utility that allows node operators to perform low-level tasks on the block logs created by a ",(0,i.jsx)(t.code,{children:"nodeop"})," instance. ",(0,i.jsx)(t.code,{children:"sysio-blocklog"})," can perform one of the following operations:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Convert a range of blocks to JSON format, as single objects or array."}),"\n",(0,i.jsxs)(t.li,{children:["Generate ",(0,i.jsx)(t.code,{children:"blocks.index"})," from ",(0,i.jsx)(t.code,{children:"blocks.log"})," in blocks directory."]}),"\n",(0,i.jsxs)(t.li,{children:["Trim ",(0,i.jsx)(t.code,{children:"blocks.log"})," and ",(0,i.jsx)(t.code,{children:"blocks.index"})," between a range of blocks."]}),"\n",(0,i.jsxs)(t.li,{children:["Perform consistency test between ",(0,i.jsx)(t.code,{children:"blocks.log"})," and ",(0,i.jsx)(t.code,{children:"blocks.index"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Repair ",(0,i.jsx)(t.code,{children:"blocks.log"})," and reconstruct ",(0,i.jsx)(t.code,{children:"blocks.index"})," if corrupted."]}),"\n",(0,i.jsx)(t.li,{children:"Prune context-free data within given transaction and block number."}),"\n",(0,i.jsxs)(t.li,{children:["Output the results of the operation to a file or ",(0,i.jsx)(t.code,{children:"stdout"})," (default)."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"sysio-blocklog"})," supports the following options:"]}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Option (=default)"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:'--blocks-dir arg (="blocks")'})}),(0,i.jsx)(t.td,{children:"The location of the blocks directory (absolute path or relative to the current directory)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:'--state-history-dir arg (="state-history")'})}),(0,i.jsxs)(t.td,{children:["The location of the ",(0,i.jsx)(t.code,{children:"state-history"})," directory (absolute path or relative to the current dir)"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"-o [ --output-file ] arg"})}),(0,i.jsxs)(t.td,{children:["The file to write the generated output to (absolute or relative path). If not specified then output is to ",(0,i.jsx)(t.code,{children:"stdout"})]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"-f [ --first ] arg (=0)"})}),(0,i.jsxs)(t.td,{children:["The first block number to log or the first block to keep if ",(0,i.jsx)(t.code,{children:"trim-blocklog"})," specified"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"-l [ --last ] arg (=4294967295)"})}),(0,i.jsxs)(t.td,{children:["the last block number to log or the last block to keep if ",(0,i.jsx)(t.code,{children:"trim-blocklog"})," specified"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"--no-pretty-print"})}),(0,i.jsxs)(t.td,{children:["Do not pretty print the output. Useful if piping to ",(0,i.jsx)(t.code,{children:"jq"})," to improve performance"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"--as-json-array"})}),(0,i.jsx)(t.td,{children:"Print out JSON blocks wrapped in JSON array (otherwise the output is free-standing JSON objects)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"--make-index"})}),(0,i.jsxs)(t.td,{children:["Create ",(0,i.jsx)(t.code,{children:"blocks.index"})," from ",(0,i.jsx)(t.code,{children:"blocks.log"}),". Must give ",(0,i.jsx)(t.code,{children:"blocks-dir"})," location. Give ",(0,i.jsx)(t.code,{children:"output-file"})," relative to current directory or absolute path (default is ",(0,i.jsx)(t.code,{children:"<blocks-dir>/blocks.index"}),")"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"--trim-blocklog"})}),(0,i.jsxs)(t.td,{children:["Trim ",(0,i.jsx)(t.code,{children:"blocks.log"})," and ",(0,i.jsx)(t.code,{children:"blocks.index"}),". Must give ",(0,i.jsx)(t.code,{children:"blocks-dir"})," and ",(0,i.jsx)(t.code,{children:"first"})," and/or ",(0,i.jsx)(t.code,{children:"last"})," options."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"--fix-irreversible-blocks"})}),(0,i.jsx)(t.td,{children:"When the existing block log is inconsistent with the index, allows fixing the block log and index files automatically - it takes the highest indexed block if valid; otherwise, it repairs the block log and reconstructs the index"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"--smoke-test"})}),(0,i.jsxs)(t.td,{children:["Quick test that ",(0,i.jsx)(t.code,{children:"blocks.log"})," and ",(0,i.jsx)(t.code,{children:"blocks.index"})," are well formed and agree with each other"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"--block-num arg (=0)"})}),(0,i.jsx)(t.td,{children:"The block number which contains the transactions to be pruned"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"-t [ --transaction ] arg"})}),(0,i.jsx)(t.td,{children:"The transaction id to be pruned"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"--prune-transactions"})}),(0,i.jsx)(t.td,{children:"Prune the context free data and signatures from specified transactions of specified block-num"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"-h [ --help ]"})}),(0,i.jsx)(t.td,{children:"Print this help message and exit"})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(t.p,{children:["When ",(0,i.jsx)(t.code,{children:"sysio-blocklog"})," is launched, the utility attempts to perform the specified operation, then yields the following possible outcomes:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"If successful, the selected operation is performed and the utility terminates with a zero error code (no error)."}),"\n",(0,i.jsxs)(t.li,{children:["If unsuccessful, the utility outputs an error to ",(0,i.jsx)(t.code,{children:"stderr"})," and terminates with a non-zero error code (indicating an error)."]}),"\n"]})]})}function a(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,t,o)=>{o.d(t,{R:()=>n,x:()=>l});var i=o(96540);const s={},r=i.createContext(s);function n(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:n(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);