"use strict";(self.webpackChunkwire_docs=self.webpackChunkwire_docs||[]).push([[7457],{19591:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var n=s(74848),r=s(28453);const t={title:"Configure state storage"},i=void 0,a={id:"api-reference/tooling/nodeop/how-to/how-to-configure-state-storage",title:"Configure state storage",description:"Summary",source:"@site/docs/api-reference/tooling/nodeop/how-to/how-to-configure-state-storage.md",sourceDirName:"api-reference/tooling/nodeop/how-to",slug:"/api-reference/tooling/nodeop/how-to/how-to-configure-state-storage",permalink:"/docs/api-reference/tooling/nodeop/how-to/how-to-configure-state-storage",draft:!1,unlisted:!1,editUrl:"https://github.com/Wire-Network/wire-docs/edit/master/docs/api-reference/tooling/nodeop/how-to/how-to-configure-state-storage.md",tags:[],version:"current",frontMatter:{title:"Configure state storage"},sidebar:"apiReferenceSidebar",previous:{title:"Nodeop Replays",permalink:"/docs/api-reference/tooling/nodeop/replays"},next:{title:"Create a snapshot with full state history",permalink:"/docs/api-reference/tooling/nodeop/how-to/how-to-create-snapshot-with-full-history"}},c={},d=[{value:"Summary",id:"summary",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Parameter Definitions",id:"parameter-definitions",level:2},{value:"Procedure",id:"procedure",level:2}];function l(e){const o={code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.h2,{id:"summary",children:"Summary"}),"\n",(0,n.jsxs)(o.p,{children:["This how-to describes configuration of the Nodeop ",(0,n.jsx)(o.code,{children:"backing store"}),". ",(0,n.jsx)(o.code,{children:"Nodeop"})," can now use ",(0,n.jsx)(o.code,{children:"chainbase"})," or ",(0,n.jsx)(o.code,{children:"rocksdb"})," as a backing store for smart contract state."]}),"\n",(0,n.jsx)(o.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,n.jsx)(o.p,{children:"Version 2.1 or above of the development environment."}),"\n",(0,n.jsx)(o.h2,{id:"parameter-definitions",children:"Parameter Definitions"}),"\n",(0,n.jsxs)(o.p,{children:["Specify which backing store to use with the ",(0,n.jsx)(o.code,{children:"chain_plugin"})," ",(0,n.jsx)(o.code,{children:"--backing-store"})," argument. This argument sets state storage to either ",(0,n.jsx)(o.code,{children:"chainbase"}),", the default, or ",(0,n.jsx)(o.code,{children:"rocksdb"}),"."]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-console",children:"Config Options for sysio::chain_plugin:\n\n  --backing-store arg (=chainbase))      The storage for state, chainbase or \n                                        rocksdb\n  --persistent-storage-num-threads arg  Number of rocksdb threads for flush and\n                                        compaction.   \n  --persistent-storage-max-num-files arg (=-1))\n            Max number of rocksdb files to keep \n                                        open. -1 = unlimited.\n  --persistent-storage-write-buffer-size-mb arg (=128))\n                                        Size of a single rocksdb memtable (in MiB)).\n  --persistent-storage-bytes-per-sync   Rocksdb write rate of flushes and compactions.\n  --persistent-storage-mbytes-snapshot-batch\n          Rocksdb batch size threshold before writing read in snapshot data to database.\n"})}),"\n",(0,n.jsx)(o.h2,{id:"procedure",children:"Procedure"}),"\n",(0,n.jsxs)(o.p,{children:["To use ",(0,n.jsx)(o.code,{children:"rocksdb"})," for state storage:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-shell",children:"nodeop -e -p sysio --plugin sysio::producer_plugin --plugin sysio::producer_api_plugin --plugin sysio::chain_api_plugin --backing-store=\u2019rocksdb\u2019 --persistent-storage-num-threads=\u20192\u2019 --persistent-storage-max-num-files=\u20192\u2019 --persistent-storage-write-buffer-size-mb=\u2019128\u2019  --plugin sysio::http_plugin \n"})}),"\n",(0,n.jsxs)(o.p,{children:["To use ",(0,n.jsx)(o.code,{children:"chainbase"})," for state storage:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-shell",children:"nodeop -e -p sysio --plugin sysio::producer_plugin --plugin sysio::producer_api_plugin --plugin sysio::chain_api_plugin --backing-store=\u2019chainbase\u2019 --plugin sysio::http_plugin \n"})}),"\n",(0,n.jsx)(o.p,{children:"or"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-shell",children:"nodeop -e -p sysio --plugin sysio::producer_plugin --plugin sysio::producer_api_plugin --plugin sysio::chain_api_plugin --plugin sysio::http_plugin \n"})})]})}function p(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,o,s)=>{s.d(o,{R:()=>i,x:()=>a});var n=s(96540);const r={},t=n.createContext(r);function i(e){const o=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(t.Provider,{value:o},e.children)}}}]);