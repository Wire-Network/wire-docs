"use strict";(self.webpackChunkwire_docs=self.webpackChunkwire_docs||[]).push([[6848],{23572:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var r=t(74848),s=t(28453);const i={},o=void 0,c={id:"api-reference/wire-cdt/how-to-guides/how-to-return-values-from-actions",title:"how-to-return-values-from-actions",description:"Overview",source:"@site/docs/api-reference/wire-cdt/how-to-guides/how-to-return-values-from-actions.md",sourceDirName:"api-reference/wire-cdt/how-to-guides",slug:"/api-reference/wire-cdt/how-to-guides/how-to-return-values-from-actions",permalink:"/docs/api-reference/wire-cdt/how-to-guides/how-to-return-values-from-actions",draft:!1,unlisted:!1,editUrl:"https://github.com/Wire-Network/wire-docs/docs/api-reference/wire-cdt/how-to-guides/how-to-return-values-from-actions.md",tags:[],version:"current",frontMatter:{}},a={},l=[{value:"Overview",id:"overview",level:2},{value:"Before you begin",id:"before-you-begin",level:2},{value:"Procedure",id:"procedure",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This how-to demonstrates how a smart contract developer implements return values from an action."}),"\n",(0,r.jsxs)(n.p,{children:["In order to accomplish this, use the ",(0,r.jsx)(n.code,{children:"return"})," statement and pass the desired returned value, which can be of any C++ primitive type, a standard library type, or a user defined type."]}),"\n",(0,r.jsx)(n.h2,{id:"before-you-begin",children:"Before you begin"}),"\n",(0,r.jsx)(n.p,{children:"Make sure you have the following prerequisites in place:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Setup Wire development environrment, for details consult the ",(0,r.jsx)(n.a,{href:"/docs/getting-started/install-dependencies",children:"Get Started Guide"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["A smart contract, let\u2019s call it ",(0,r.jsx)(n.code,{children:"smrtcontract"}),", which builds without error."]}),"\n",(0,r.jsxs)(n.li,{children:["An action, let\u2019s call it ",(0,r.jsx)(n.code,{children:"checkwithrv"}),", from which you want to return a value of a user defined type ",(0,r.jsx)(n.code,{children:"action_response"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Refer to the following reference implementation for your starting point:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"struct action_response\n{\n  uint16_t id;\n  std::pair<int, std::string> status;\n};\n\nclass [[sysio::contract]] smrtcontract : public contract {\n  public:\n     using contract::contract;\n\n     [[sysio::action]]\n     action_response checkwithrv( name nm );\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"procedure",children:"Procedure"}),"\n",(0,r.jsxs)(n.p,{children:["Complete the following steps to return an instance of ",(0,r.jsx)(n.code,{children:"action_response"})," from the ",(0,r.jsx)(n.code,{children:"checkwithrv"})," action:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Create an instance of the ",(0,r.jsx)(n.code,{children:"action_response"})," C++ user defined structure."]}),"\n",(0,r.jsx)(n.li,{children:"Initialize its data members based on the action\u2019s business logic."}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"return"})," statement and pass as a parameter the instance created and initialized in previous steps."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'[[sysio::action]]\naction_response smrtcontract::checkwithrv( name nm ) {\n  print_f("Name : %\\n", nm);\n\n  // create instance of the action response structure\n  action_response results;\n\n  // initialize its data members\n  results.id = 1;\n  if (nm == "hello"_n) {\n     results.status = {0, "Validation has passed."};\n  }\n  else {\n     results.status = {1, "Input param `name` not equal to `hello`."};\n  }\n  \n  // use return statement\n  return results; // the `set_action_return_value` intrinsic is invoked automatically here\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["For a complete example of a smart contract that implements an action which returns a value see the ",(0,r.jsx)(n.a,{href:"https://github.com/Wire-Network/guides/hello-world-contract",children:"hello example contract"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Compile the smart contract and deploy it to the Wire testnet or any Wire-based blockchain."}),"\n",(0,r.jsxs)(n.li,{children:["Use the ",(0,r.jsx)(n.code,{children:"clio"})," command to send the ",(0,r.jsx)(n.code,{children:"checkwithrv"})," action to the smart contract and observe the returned value in the ",(0,r.jsx)(n.code,{children:"clio"})," output."]}),"\n",(0,r.jsxs)(n.li,{children:["Use other means (e.g. programmatically) to send the  ",(0,r.jsx)(n.code,{children:"checkwithrv"})," action to the smart contract and observe the returned value in the action trace."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"The action return values are only available to clients sending the action via the RPC API. Currently, there is no support for an inline action to be able to use the return value, because inline actions don't execute synchronously."})}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"In conclusion, the above instructions show how to return values from actions."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var r=t(96540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);