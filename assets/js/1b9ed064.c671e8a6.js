"use strict";(self.webpackChunkwire_docs=self.webpackChunkwire_docs||[]).push([[6374],{65737:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var i=o(74848),s=o(28453);const r={},t=void 0,d={id:"api-reference/tooling/nodeop/plugins/resource-monitor-plugin",title:"resource-monitor-plugin",description:"Overview",source:"@site/docs/api-reference/tooling/nodeop/plugins/resource-monitor-plugin.md",sourceDirName:"api-reference/tooling/nodeop/plugins",slug:"/api-reference/tooling/nodeop/plugins/resource-monitor-plugin",permalink:"/docs/api-reference/tooling/nodeop/plugins/resource-monitor-plugin",draft:!1,unlisted:!1,editUrl:"https://github.com/Wire-Network/wire-docs/docs/api-reference/tooling/nodeop/plugins/resource-monitor-plugin.md",tags:[],version:"current",frontMatter:{},sidebar:"apiReferenceSidebar",previous:{title:"producer-plugin",permalink:"/docs/api-reference/tooling/nodeop/plugins/producer-plugin"},next:{title:"state-history-plugin",permalink:"/docs/api-reference/tooling/nodeop/plugins/state-history-plugin"}},c={},l=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Plugin Dependencies",id:"plugin-dependencies",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"resource_monitor_plugin"})," monitors space usage in the computing system where ",(0,i.jsx)(n.code,{children:"nodeop"})," is running. Specifically, every ",(0,i.jsx)(n.code,{children:"resource-monitor-interval-seconds"})," seconds,\nit measures the individual space used by each of the file systems mounted\nby ",(0,i.jsx)(n.code,{children:"data-dir"}),", ",(0,i.jsx)(n.code,{children:"state-dir"}),", ",(0,i.jsx)(n.code,{children:"blocks-log-dir"}),", ",(0,i.jsx)(n.code,{children:"snapshots-dir"}),",\n",(0,i.jsx)(n.code,{children:"state-history-dir"}),", and ",(0,i.jsx)(n.code,{children:"trace-dir"}),".\nWhen space usage in any of the monitored file system is within ",(0,i.jsx)(n.code,{children:"5%"})," of the threshold\nspecified by ",(0,i.jsx)(n.code,{children:"resource-monitor-space-threshold"}),", a warning containing the file system\npath and percentage of space has used is printed out.\nWhen space usage exceeds the threshold,\nif ",(0,i.jsx)(n.code,{children:"resource-monitor-not-shutdown-on-threshold-exceeded"})," is not set,\n",(0,i.jsx)(n.code,{children:"nodeop"})," gracefully shuts down; if ",(0,i.jsx)(n.code,{children:"resource-monitor-not-shutdown-on-threshold-exceeded"})," is set, ",(0,i.jsx)(n.code,{children:"nodeop"})," prints out warnings periodically\nuntil space usage goes under the threshold."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"resource_monitor_plugin"})," is always loaded."]}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"# config.ini\nplugin = sysio::resource_monitor_plugin\n[options]\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"# command-line\nnodeop ... --plugin sysio::resource_monitor_plugin [options]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,i.jsxs)(n.p,{children:["These can be specified from both the ",(0,i.jsx)(n.code,{children:"nodeop"})," command-line or the ",(0,i.jsx)(n.code,{children:"config.ini"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:'Config Options for sysio::resource_monitor_plugin:\n\n  --resource-monitor-interval-seconds arg (=2))\n                                        Time in seconds between two consecutive checks\n                                        of space usage. Should be between 1 and 300.\n  --resource-monitor-space-threshold arg (=90))\n                                        Threshold in terms of percentage of used space\n                                        vs total space. If the used space is within\n                                        `5%` of the threshold, a warning is generated.\n                                        If the used space is above the threshold and\n                                        `resource-monitor-not-shutdown-on-threshold-exceeded`\n                                        is enabled, a shutdown is initiated; otherwise\n                                        a warning will be continuously printed out.\n                                        The value should be between 6 and 99.\n  --resource-monitor-not-shutdown-on-threshold-exceeded\n                                        A switch used to indicate `nodeop` will "not"\n                                        shutdown when threshold is exceeded. When not\n                                        set, `nodeop` will shutdown.\n  --resource-monitor-warning-interval arg (=30))\n                                        Number of monitor intervals between which a\n                                        warning is displayed.  For example, if\n                                        `resource-monitor-warning-interval` is to 10\n                                        and `resource-monitor-interval-seconds` is 2,\n                                        a warning will be displayed every 20 seconds,\n                                        even though the space usage is checked every\n                                        2 seconds.  This is used to throttle the\n                                        number of warnings in the `nodeop` log file.\n                                        Should be between 1 and 450.\n'})}),"\n",(0,i.jsx)(n.h2,{id:"plugin-dependencies",children:"Plugin Dependencies"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"None"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>d});var i=o(96540);const s={},r=i.createContext(s);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);